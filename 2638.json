//  this crawler gets back title and summary_text

// {
//   "spider_name": "unified-eu-ec-consolidated-financial-sanctions",
//   "api_table": "fed_api_docs",
//   "meta_table": "agency_updates",
//   "jurisdiction": "EU",
//   "agency": "[EU] European Union Council - Consolidated list of EU financial sanctions",
//   "agency_id": 33100005,
//   "short_name": "EU-EC",
//   "category": "Financial Sanction",
//   "base_url": "https://data.europa.eu/",
//   "content_url": "https://data.europa.eu/data/datasets/consolidated-list-of-persons-groups-and-entities-subject-to-eu-financial-sanctions?locale=en",
//   "specification": "https://docs.google.com/document/d/1NliFx1ZNlpl7EuXiNpJ59VKm93k3nJ8TNqtZ6sdJAro/edit",
//   "configurations": {
//     "steps": {
//       "start": {
//         "description": "Starting step that loads main web-page.",
//         "save_document": false,
//         "process_related_documents": false,
//         "is_parent": false,
//         "continue_crawl": false,
//         "next_step": "articles_step"
//       },
//       "articles_step": {
//         "description": "Getting a list of articles for the current page",
//         "save_document": false,
//         "process_related_documents": false,
//         "is_parent": false,
//         "continue_crawl": false,
//         "context": {
//           "is_url": false,
//           "is_text": false,
//           "is_single": false,
//           "is_sibling_tag": false,
//           "combine_context": false,
//           "is_page_source": false,
//           "path": ["body"]
//         },
//         "next_step": ["items_step"]
//       },
//       "items_step": {
//         "description": "Getting metadata of the current article",
//         "save_document": false,
//         "process_related_documents": false,
//         "is_parent": false,
//         "continue_crawl": false,
//         "context": {
//           "is_url": false,
//           "is_text": false,
//           "is_single": false,
//           "is_sibling_tag": false,
//           "combine_context": false,
//           "is_page_source": false,
//           "path": [
//             "body > div > div.site-wrapper > div.d-flex.flex-column.p-0.bg-transparent.content"
//           ]
//         },
//         "doc": {
//           "title": {
//             "is_text": true,
//             "is_url": false,
//             "is_single": true,
//             "is_sibling_tag": false,
//             "is_sibling_text": false,
//             "is_date": false,
//             "dayfirst": false,
//             "parse_pdf": false,
//             "from_url": false,
//             "is_current_url": false,
//             "is_text_generated": false,
//             "path": ["nav > h1"]
//           },
//           "summary_text": {
//             "is_text": true,
//             "is_url": false,
//             "is_single": true,
//             "is_sibling_tag": false,
//             "is_sibling_text": false,
//             "is_date": false,
//             "dayfirst": false,
//             "parse_pdf": false,
//             "from_url": false,
//             "is_current_url": false,
//             "is_text_generated": false,
//             "path": [
//               "div.dsd-dataset > div.row.mt-4.mb-4.dsd-description > div > div > div > p:nth-of-type(1)"
//             ]
//           },
//           "incomplete_pub_date": true
//         },
//         "next_step": ["details_step"],
//         "parent_context": "articles_step"
//       },
//       "details_step": {
//         "description": "getting full_text of the doc.",
//         "doc": {
//           "html": {
//             "path": "body"
//           }
//         }
//       }
//     }
//   }
// }

//  this crawler gets back title and summary_text-

// {
//   "spider_name": "unified-eu-ec-consolidated-financial-sanctions",
//   "api_table": "fed_api_docs",
//   "meta_table": "agency_updates",
//   "jurisdiction": "EU",
//   "agency": "[EU] European Union Council - Consolidated list of EU financial sanctions",
//   "agency_id": 33100005,
//   "short_name": "EU-EC",
//   "category": "Financial Sanction",
//   "base_url": "https://data.europa.eu/",
//   "content_url": "https://data.europa.eu/data/datasets/consolidated-list-of-persons-groups-and-entities-subject-to-eu-financial-sanctions?locale=en",
//   "specification": "https://docs.google.com/document/d/1NliFx1ZNlpl7EuXiNpJ59VKm93k3nJ8TNqtZ6sdJAro/edit",
//   "configurations": {
//     "steps": {
//       "start": {
//         "description": "Starting step that loads main web-page.",
//         "save_document": false,
//         "process_related_documents": false,
//         "is_parent": false,
//         "continue_crawl": false,
//         "next_step": "articles_step"
//       },
//       "articles_step": {
//         "description": "Getting a list of articles for the current page",
//         "save_document": false,
//         "process_related_documents": false,
//         "is_parent": false,
//         "continue_crawl": false,
//         "context": {
//           "is_url": false,
//           "is_text": false,
//           "is_single": false,
//           "is_sibling_tag": false,
//           "combine_context": false,
//           "is_page_source": false,
//           "path": ["body"]
//         },
//         "next_step": ["items_step"]
//       },

//       "items_step": {
//         "description": "Getting metadata of the current article",
//         "save_document": false,
//         "process_related_documents": false,
//         "is_parent": false,
//         "continue_crawl": false,
//         "context": {
//           "is_url": false,
//           "is_text": false,
//           "is_single": false,
//           "is_sibling_tag": false,
//           "combine_context": false,
//           "is_page_source": false,
//           "path": [
//             "body > div > div.site-wrapper > div.d-flex.flex-column.p-0.bg-transparent.content"
//           ]
//         },
//         "doc": {
//           "title": {
//             "is_text": true,
//             "is_url": false,
//             "is_single": true,
//             "is_sibling_tag": false,
//             "is_sibling_text": false,
//             "is_date": false,
//             "dayfirst": false,
//             "parse_pdf": false,
//             "from_url": false,
//             "is_current_url": false,
//             "is_text_generated": false,
//             "path": ["nav > h1"]
//           },
//           "summary_text": {
//             "is_text": true,
//             "is_url": false,
//             "is_single": true,
//             "is_sibling_tag": false,
//             "is_sibling_text": false,
//             "is_date": false,
//             "dayfirst": false,
//             "parse_pdf": false,
//             "from_url": false,
//             "is_current_url": false,
//             "is_text_generated": false,
//             "path": [
//               "div.dsd-dataset > div.row.mt-4.mb-4.dsd-description > div > div > div > p:nth-of-type(1)"
//             ]
//           },
//           "incomplete_pub_date": true
//         },
//         "parent_context": "articles_step",
//         "next_step": ["filter_for_pdf"]
//       },

//       "filter_for_pdf": {
//         "context": {
//           "path": "body > div > div.site-wrapper > div.d-flex.flex-column.p-0.bg-transparent.content > div > div:nth-of-child(3) > div.dsd-dataset > div.mt-1.dsd-distributions > div > ul > div > div",
//           "tag_filter": "[result if .pdf]"
//         },
//         "next_step": "click_to_expose_pdf"
//       },

//       "click_to_expose_pdf": {
//         "context": {
//           "path": "html/body/div/div[4]/div[2]/div/div[2]/div[2]/div[3]/div/ul/div/div[5]/div/div[2]/div/div/div[1]/div/button",
//           "type": "click"
//         },
//         "next_step": ["ingest_pdf_url"]
//       },

//       "ingest_pdf_url": {
//         "context": {
//           "is_url": true,
//           "path": "a tag"
//         },
//         "next_step": "details_step"
//       },

//       "details_step": {
//         "description": "getting full_text of the doc.",
//         "save_document": true,
//         "process_related_documents": false,
//         "doc": {
//           "html": {
//             "path": "body"
//           }
//         }
//       },
//       "next_step": "find_date_in_pdf"
//     },

//     "find_date_in_pdf": {
//       "description": "Find date in pdf full text",
//       "pre_generate_full_text": "pdf_url",
//       "doc": {
//         "incomplete_pub_date": true,
//         "pub_date": {
//           "path": "body",
//           "is_text_generated": true,
//           "regex": ["\\d{2}\\/\\d{2}\\/\\d{4}"]
//         }
//       }
//     }
//   }
// }

//  this attempt just selects the specfic download button from the div that says pdf
//  I have not tried this yet.... I have added context of xml to the article of the click actions step.

{
  "spider_name": "unified-eu-ec-consolidated-financial-sanctions",
  "api_table": "fed_api_docs",
  "meta_table": "agency_updates",
  "jurisdiction": "EU",
  "agency": "[EU] European Union Council - Consolidated list of EU financial sanctions",
  "agency_id": 33100005,
  "short_name": "EU-EC",
  "category": "Financial Sanction",
  "base_url": "https://data.europa.eu/",
  "content_url": "https://data.europa.eu/data/datasets/consolidated-list-of-persons-groups-and-entities-subject-to-eu-financial-sanctions?locale=en",
  "specification": "https://docs.google.com/document/d/1NliFx1ZNlpl7EuXiNpJ59VKm93k3nJ8TNqtZ6sdJAro/edit",
  "configurations": {
    "steps": {
      "start": {
        "description": "Starting step that loads main web-page.",
        "save_document": false,
        "process_related_documents": false,
        "is_parent": false,
        "continue_crawl": false,
        "next_step": "articles_step"
      },
      "articles_step": {
        "description": "Getting a list of articles for the current page",
        "save_document": false,
        "process_related_documents": false,
        "is_parent": false,
        "continue_crawl": false,
        "context": {
          "is_url": false,
          "is_text": false,
          "is_single": false,
          "is_sibling_tag": false,
          "combine_context": false,
          "is_page_source": false,
          "path": ["body"]
        },
        "next_step": ["items_step"]
      },

      "items_step": {
        "description": "Getting metadata of the current article",
        "save_document": false,
        "process_related_documents": false,
        "is_parent": false,
        "continue_crawl": false,
        "context": {
          "is_url": false,
          "is_text": false,
          "is_single": false,
          "is_sibling_tag": false,
          "combine_context": false,
          "is_page_source": false,
          "path": [
            "body > div > div.site-wrapper > div.d-flex.flex-column.p-0.bg-transparent.content"
          ]
        },
        "doc": {
          "title": {
            "is_text": true,
            "is_url": false,
            "is_single": true,
            "is_sibling_tag": false,
            "is_sibling_text": false,
            "is_date": false,
            "dayfirst": false,
            "parse_pdf": false,
            "from_url": false,
            "is_current_url": false,
            "is_text_generated": false,
            "path": ["nav > h1"]
          },
          "summary_text": {
            "is_text": true,
            "is_url": false,
            "is_single": true,
            "is_sibling_tag": false,
            "is_sibling_text": false,
            "is_date": false,
            "dayfirst": false,
            "parse_pdf": false,
            "from_url": false,
            "is_current_url": false,
            "is_text_generated": false,
            "path": [
              "div.dsd-dataset > div.row.mt-4.mb-4.dsd-description > div > div > div > p:nth-of-type(1)"
            ]
          },
          "incomplete_pub_date": true
        },
        "parent_context": "articles_step",
        "next_step": "click_to_expose_pdf"
      },

      "click_to_expose_pdf": {
        "context": {
          "path": "div.dsd-dataset > div.mt-1.dsd-distributions > div > ul > div > div:nth-of-type(5) > div"
        },
        "description": "clicks the download button within the pdf article to expose the href",
        "actions": [
          {
            "path": "//html/body/div/div[4]/div[2]/div/div[2]/div[2]/div[3]/div/ul/div/div[5]/div/div[2]/div/div/div[1]/div/button",
            "type": "click"
          }
        ],
        "next_step": "ingest_pdf_url"
      },

      "ingest_pdf_url": {
        "description": "ingests the pdf_url",
        "context": {
          "path": "div.dsd-dataset > div.mt-1.dsd-distributions > div > ul > div > div:nth-of-type(5) > div"
        },
        "doc": {
          "path": "div > div > div > div > div > div > span:nth-of-type(1) > a",
          "is_url": true
        },
        "next_step": "details_step"
      },

      "details_step": {
        "description": "getting full_text of the doc.",
        "incomplete_pub_date": true,
        "save_document": true,
        "process_related_documents": true,
        "context": {
          "path": "body"
        },
        "doc": {
          "html": {
            "is_text": false,
            "is_single": false,
            "is_sibling_tag": false,
            "is_sibling_text": false,
            "is_date": false,
            "dayfirst": false,
            "parse_pdf": false,
            "from_url": false,
            "is_current_url": false,
            "path": ["body"]
          }
        },
        "next_step": "find_date_in_pdf"
      },

      "find_date_in_pdf": {
        "description": "Find date in pdf full text",
        "incomplete_pub_date": true,
        "save_document": true,
        "pre_generate_full_text": "html",
        "doc": {
          "pub_date": {
            "path": "body",
            "is_text_generated": true,
            "regex": ["\\d{2}\\/\\d{2}\\/\\d{4}"]
          }
        }
      }
    }
  }
}
